<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.choi.calender.mapper.CalenderMapper">
    <!-- TypeHandler 등록 -->
<!--    <typeHandlers>-->
<!--        <typeHandler handler="com.choi.calender.application.handler.ListToStringTypeHandler" />-->
<!--    </typeHandlers>-->

    <insert id="insertDiary" parameterType="calenderBean">
        INSERT INTO tb_diary
        (
            dairy_date,
            day_of_week,
            weather,
            emotion,
            content
        )
        VALUES
        (
            #{date},
            #{dayOfWeek},
            #{weather},
            #{emotion},
            #{content}
        )
    </insert>






    <select id="isDuplicationIdCheck" parameterType="String" resultType="boolean">
        SELECT
            IF(COUNT(1) >= 1, TRUE, FALSE) as dupli
        FROM
            tb_user
        <where>
            AND id = #{id}
        </where>
    </select>

    <update id="updateApproveStatus" parameterType="string">
        UPDATE tb_user
        SET approve_yn = #{status}
        WHERE id = #{id}
    </update>

    <update id="updateUserData" parameterType="calenderBean">
        UPDATE tb_user
        SET
            pw = #{pw},
            name = #{name},
            email = #{email},
            phone = #{phone},
            company_name = #{companyName},
            position = #{position},
            etc = #{etc}
        WHERE id = #{id}
    </update>
</mapper>
